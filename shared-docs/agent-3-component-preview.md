# JobDetailPanel Component - Visual Preview

## Component Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Job Details              ID: 7a3f2bc1    [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Job Information     [URGENT] [SCHEDULED]â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ”” Description                          â”‚   â”‚
â”‚  â”‚    Water heater repair - emergency      â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ Customer                             â”‚   â”‚
â”‚  â”‚    John Doe                             â”‚   â”‚
â”‚  â”‚ ğŸ“ Address                              â”‚   â”‚
â”‚  â”‚    123 Main St, Indianapolis, IN        â”‚   â”‚
â”‚  â”‚ ğŸ“… Scheduled                            â”‚   â”‚
â”‚  â”‚    Nov 27, 2025 2:00 PM                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ Customer Contact                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [ ğŸ“ (317) 555-0123 ]                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ§­ Navigation                           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [ ğŸ§­ Navigate to Job ]                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ Available Technicians (5)            â”‚   â”‚
â”‚  â”‚ Sorted by distance (nearest first)      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Mike Johnson          2.3 mi ğŸŸ¢     â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [TECH] [IDLE]         ~5 min ETA    â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Last seen: 10:35 AM                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ âœ“ Assign to Mike ]                â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Sarah Williams        7.8 mi ğŸŸ¡     â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [TECH] [IDLE]         ~16 min ETA   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Last seen: 10:32 AM                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ âœ“ Assign to Sarah ]               â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Tom Davis             12.5 mi ğŸŸ     â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [TECH] [EN_ROUTE]     ~25 min ETA   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ On: Furnace inspection              â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Last seen: 10:28 AM                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ âœ“ Assign to Tom ]                 â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Lisa Martinez         18.2 mi ğŸŸ     â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [SALES] [IDLE]        ~36 min ETA   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Last seen: 10:25 AM                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ âœ“ Assign to Lisa ]                â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Bob Anderson          25.7 mi ğŸ”´    â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [TECH] [ON_JOB]       ~51 min ETA   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ On: Air conditioning repair         â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Last seen: 10:20 AM                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ âœ“ Assign to Bob ]                 â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Distance Color Legend:                         â”‚
â”‚ ğŸŸ¢ < 5 miles   ğŸŸ¡ 5-10 miles                   â”‚
â”‚ ğŸŸ  10-20 miles  ğŸ”´ > 20 miles                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Schemes

### Priority Badges

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LOW    â”‚  NORMAL  â”‚   HIGH   â”‚  URGENT  â”‚
â”‚  [Gray]  â”‚  [Blue]  â”‚ [Orange] â”‚   [Red]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Status Badges

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCHEDULED  â”‚ EN_ROUTE  â”‚ IN_PROGRESS â”‚
â”‚  [Yellow]  â”‚  [Blue]   â”‚   [Green]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Distance Color Coding

```
Distance Range    Color     Use Case
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
< 5 miles         ğŸŸ¢ Green   Excellent match
5-10 miles        ğŸŸ¡ Yellow  Good match
10-20 miles       ğŸŸ  Orange  Moderate distance
> 20 miles        ğŸ”´ Red     Long travel time
```

## Responsive Layouts

### Desktop (â‰¥ 768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Map Area                           â”‚
â”‚                                                       â”‚
â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚  Job   â”‚
â”‚                                              â”‚ Detail â”‚
â”‚                                              â”‚ Panel  â”‚
â”‚                                              â”‚ 450px  â”‚
â”‚                                              â”‚        â”‚
â”‚                                              â”‚ (Fixed â”‚
â”‚                                              â”‚ Right) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (< 768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚     Map Area        â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Job Detail Panel  â”‚
â”‚   (Full Width)      â”‚
â”‚   (Overlay)         â”‚
â”‚                     â”‚
â”‚   [Scrollable]      â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Interactive Elements

### Assign Button States

```
Default:      [ âœ“ Assign to Mike ]
Loading:      [ âŸ³ Assigning... ]
Disabled:     [ âœ“ Assign to Mike ] (grayed out for offline techs)
```

### Tech Card Hover

```
Normal:       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Mike Johnson    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Hovered:      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† Shadow effect
              â”‚ Mike Johnson    â”‚  â† Slight elevation
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
Parent Component (DispatchMapPage)
    â”‚
    â”œâ”€â”€ Fetches jobs from API
    â”œâ”€â”€ Fetches techs from API
    â”‚
    â”œâ”€â”€ User clicks job marker on map
    â”‚
    â””â”€â†’ Opens JobDetailPanel
         â”‚
         â”œâ”€â”€ Calculates distances for each tech
         â”œâ”€â”€ Sorts techs by distance
         â”œâ”€â”€ Renders tech recommendations
         â”‚
         â”œâ”€â”€ User clicks "Assign to [Tech]"
         â”‚
         â””â”€â†’ Calls onAssignTech(jobId, techId)
              â”‚
              â””â”€â†’ Parent sends POST /api/dispatch/jobs/[id]/assign
```

## Example Usage

```typescript
// In DispatchMapPage.tsx
import JobDetailPanel from '@/components/dispatch/JobDetailPanel'

function DispatchMapPage() {
  const [selectedJob, setSelectedJob] = useState<JobLocation | null>(null)
  const [jobs, setJobs] = useState<JobLocation[]>([])
  const [techs, setTechs] = useState<TechLocation[]>([])

  const handleAssignTech = async (jobId: string, techId: string) => {
    const response = await fetch(`/api/dispatch/jobs/${jobId}/assign`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ techId, notifyTech: true })
    })

    if (response.ok) {
      // Refresh jobs and close panel
      await fetchJobs()
      setSelectedJob(null)
      toast.success('Tech assigned successfully!')
    } else {
      toast.error('Failed to assign tech')
    }
  }

  const handleNavigate = (lat: number, lng: number) => {
    // Open Google Maps with directions
    window.open(
      `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`,
      '_blank'
    )
  }

  return (
    <div className="relative">
      {/* Google Map */}
      <GoogleMap>
        {jobs.map(job => (
          <Marker
            key={job.id}
            position={job.location}
            onClick={() => setSelectedJob(job)}
          />
        ))}
      </GoogleMap>

      {/* Job Detail Panel */}
      {selectedJob && (
        <JobDetailPanel
          job={selectedJob}
          onClose={() => setSelectedJob(null)}
          onAssignTech={handleAssignTech}
          onNavigate={handleNavigate}
          availableTechs={techs}
        />
      )}
    </div>
  )
}
```

## Component Props

```typescript
interface JobDetailPanelProps {
  // The job to display details for
  job: JobLocation

  // Callback when user closes the panel
  onClose: () => void

  // Callback when user assigns a tech to the job
  // Returns a promise for async handling
  onAssignTech: (jobId: string, techId: string) => Promise<void>

  // Callback when user clicks "Navigate to Job"
  // Provides GPS coordinates for external navigation
  onNavigate: (lat: number, lng: number) => void

  // List of all available techs (will be filtered and sorted)
  availableTechs: TechLocation[]
}
```

## Performance Notes

- Distance calculations run once on mount (useMemo)
- Only recalculates when job location or techs array changes
- Filters out techs without GPS data efficiently
- Sorting is O(n log n) but cached with useMemo
- No unnecessary re-renders

## Accessibility Features

- Semantic HTML (header, main, section)
- ARIA labels on buttons (via shadcn/ui)
- Keyboard navigation support
- High contrast colors
- Screen reader friendly
- Focus management

## Browser Support

- Chrome/Edge: âœ… Full support
- Firefox: âœ… Full support
- Safari: âœ… Full support
- Mobile Safari: âœ… Full support
- Mobile Chrome: âœ… Full support

---

*This preview document shows the visual layout and functionality of the JobDetailPanel component.*
